{
    "problem": {
    "id": "0004",
    "slug": "matrix-diagonal-sum",
    "title": "矩陣對角線之和",
    "content": {
        "description": "給定一個 <b>n × n 的二維整數陣列</b> matrix，請計算其 <b>主對角線</b> 和 <b>副對角線</b> 上所有元素的總和。<br><br>注意：如果矩陣的大小為奇數，中間的元素會被計算兩次（同時屬於兩條對角線），在總和中應該只計算一次。",
        "input_format": "一個參數：<br><b>matrix</b>：一個二維整數陣列，表示 n × n 的方陣<br><br><b>範例輸入</b>：<br>matrix = [[1,2,3],<br>          [4,5,6],<br>          [7,8,9]]",
        
        "output_format": "返回一個整數，表示兩條對角線上所有元素的總和（中間元素不重複計算）<br><br><b>範例輸出</b>：<br>25<br><br><b>解釋</b>：<br>主對角線：1 + 5 + 9 = 15<br>副對角線：3 + 5 + 7 = 15<br>總和：15 + 15 - 5 = 25（減去重複計算的中間元素 5）",
        
        "constraints": [
            "1 ≤ n ≤ 100",
            "-10⁶ ≤ matrix[i][j] ≤ 10⁶",
            "`matrix` 保證是 n × n 的方陣"
        ],

        "sampleCode": "def diagonalSum(matrix: list[list[int]]) -> int:",

        "execName": "diagonalSum",
        
        "examples": [
            {
                "input": "matrix = [[1,2,3],[4,5,6],[7,8,9]]",
                "output": "25",
                "explanation": "主對角線：1+5+9=15，副對角線：3+5+7=15，總和：15+15-5=25"
            },
            {
                "input": "matrix = [[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1]]",
                "output": "8",
                "explanation": "主對角線：1+1+1+1=4，副對角線：1+1+1+1=4，總和：4+4=8（偶數矩陣無重複元素）"
            },
            {
                "input": "matrix = [[5]]",
                "output": "5",
                "explanation": "單元素矩陣，該元素同時屬於兩條對角線，只計算一次"
            },
            {
                "input": "matrix = [[1,2],[3,4]]",
                "output": "10",
                "explanation": "主對角線：1+4=5，副對角線：2+3=5，總和：5+5=10"
            },
            {
                "input": "matrix = [[-1,-2,-3],[-4,-5,-6],[-7,-8,-9]]",
                "output": "-25",
                "explanation": "主對角線：-1+(-5)+(-9)=-15，副對角線：-3+(-5)+(-7)=-15，總和：-15+(-15)-(-5)=-25"
            }
        ],
        
        "notes": [
            "<b>矩陣對角線定義</b>：<br>1. <b>主對角線</b>：從左上角到右下角的對角線，元素位置為 (i, i)<br>2. <b>副對角線</b>：從右上角到左下角的對角線，元素位置為 (i, n-i-1)",
            
            "<b>算法思路</b>：<br>方法一（直接計算）：<br>1. 初始化總和 sum = 0<br>2. 遍歷 i 從 0 到 n-1：<br>   - 將 matrix[i][i]（主對角線）加到 sum<br>   - 將 matrix[i][n-i-1]（副對角線）加到 sum<br>3. 如果 n 是奇數，減去中間元素 matrix[n//2][n//2]<br><br>方法二（一次遍歷）：<br>1. 初始化 sum = 0<br>2. 遍歷 i 從 0 到 n-1：<br>   - sum += matrix[i][i] + matrix[i][n-i-1]<br>3. 如果 n 是奇數，sum -= matrix[n//2][n//2]",
            
            "<b>時間與空間複雜度分析</b>：<br>- 時間複雜度：O(n)，只需要遍歷一次<br>- 空間複雜度：O(1)，只使用常數額外空間",
            
            "<b>代碼實現</b>：<br>```python<br>def diagonalSum(matrix):<br>    n = len(matrix)<br>    total = 0<br>    <br>    for i in range(n):<br>        total += matrix[i][i]           # 主對角線<br>        total += matrix[i][n - i - 1]   # 副對角線<br>    <br>    # 如果矩陣大小是奇數，減去重複計算的中間元素<br>    if n % 2 == 1:<br>        mid = n // 2<br>        total -= matrix[mid][mid]<br>    <br>    return total<br>```",
            
            "<b>常見錯誤</b>：<br>1. 忘記處理奇數大小矩陣的中間元素重複問題<br>2. 錯誤計算副對角線的索引<br>3. 沒有考慮負數元素的情況<br>4. 對於單元素矩陣處理不當",
            
            "<b>邊界情況</b>：<br>1. 1×1 矩陣：直接返回該元素<br>2. 2×2 矩陣：兩條對角線無重疊元素<br>3. 所有元素相同的矩陣：容易驗證計算結果",
            
            "<b>進階思考</b>：<br>1. 如果是 m×n 的長方形矩陣，如何定義對角線？<br>2. 如何計算所有對角線（包括非主對角線）的元素和？<br>3. 如果要求計算主對角線上方或下方的元素和，該如何實現？<br>4. 如何計算矩陣的跡（trace）？它與主對角線和有什麼關係？",
            
            "<b>相關數學概念</b>：<br>1. 矩陣的跡（Trace）：主對角線元素之和<br>2. 對稱矩陣：主對角線兩側元素對稱<br>3. 單位矩陣：主對角線為 1，其他為 0 的矩陣",
            
            "<b>應用場景</b>：<br>1. 圖像處理中的濾波器<br>2. 機器學習中的協方差矩陣<br>3. 物理學中的慣性張量<br>4. 計算機圖形學中的變換矩陣"
        ]
    }
}}